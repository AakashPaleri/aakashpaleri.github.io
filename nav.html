<header>
  <h1><a href="index.html">Ethics-by-Design Toolbox for Synthetic Biology</a></h1>
</header>

<nav class="collapsed" id="responsiveNav">
  <button class="nav-toggle" id="hamburger">‚ò∞ Menu</button> <!-- HIGHLIGHTED: id added for JS -->
  <div class="dropdown">
    <a class="tab" href="index.html">üè†&nbsp;Home</a>
  </div>
  <div class="dropdown">
    <a class="tab" href="#">Ethics-by-Design Toolbox</a>
    <div class="dropdown-content">
      <a href="intro.html">Introduction to the Toolbox</a>
      <a href="sop.html">SOP for Ethics-Science Integration</a>
    </div>
  </div>
  <div class="dropdown">
    <a class="tab" href="#">Ethics Framework</a>
    <div class="dropdown-content">
      <a href="ethics-video.html">Introduction to Ethics</a>
      <a href="principles.html">Ethical Principles</a>
      <a href="stakeholders.html">Relationship with Stakeholders</a>
    </div>
  </div>
  <div class="dropdown">
    <a class="tab" href="#">Case Studies</a>
    <div class="dropdown-content">
      <a href="artemisinin.html">Semi-Synthetic Artemisinin</a>
      <a href="bioremediation.html">Bioremediation</a>
      <a href="vanillin.html">Semi-Synthetic Vanillin</a>
      <a href="bioart.html">Bioart</a>
      <a href="heatresistant.html">Engineered Heat-Resistant Coral</a>
    </div>
  </div>
  <div class="dropdown">
    <a class="tab" href="#">Ethics Exercise</a>
    <div class="dropdown-content">
      <a href="questionnaire.html">Self-Analysis Questionnaire</a>
    </div>
  </div>
  <div class="dropdown">
    <a class="tab" href="#">Green Lab</a>
    <div class="dropdown-content">
      <a href="labsustain.html">Lab Sustainability Practices</a>
      <a href="suggestions.html">Suggestions (open to users)</a>
    </div>
  </div>
  <div class="dropdown">
    <a class="tab" href="contact.html">Contact Us</a>
  </div>
  <div class="dropdown">
    <a class="tab" href="partner.html">Partner with Us</a>
  </div>
</nav>

<script>
  // HIGHLIGHTED: Re-attach toggle logic after fetch
  document.addEventListener('DOMContentLoaded', () => {
    const toggleButton = document.getElementById("hamburger");
    const nav = document.getElementById("responsiveNav");
    if (toggleButton && nav) {
      toggleButton.addEventListener("click", () => {
        nav.classList.toggle("expanded");
        nav.classList.toggle("collapsed");
      });
    }

    // Highlight current page tab (auto by URL)
    const links = nav.querySelectorAll(".dropdown-content a, .tab");
    const currentPath = window.location.pathname.split("/").pop();
    links.forEach(link => {
      const href = link.getAttribute("href");
      if (href === currentPath) {
        link.classList.add("current");
      }
    });

    // Close nav after click on mobile
    links.forEach(link => {
      link.addEventListener("click", () => {
        if (window.innerWidth <= 980) {
          nav.classList.remove("expanded");
          nav.classList.add("collapsed");
        }
      });
    });

    // Keyboard accessibility for dropdowns
    const dropdowns = nav.querySelectorAll(".dropdown");
    dropdowns.forEach(dropdown => {
      const tab = dropdown.querySelector(".tab");
      if (tab) {
        tab.setAttribute("tabindex", "0");
        tab.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            const content = dropdown.querySelector(".dropdown-content");
            if (content) {
              // For desktop, toggle dropdown display
              const isOpen = content.style.display === "block";
              content.style.display = isOpen ? "none" : "block";
            }
          }
        });
      }
    });
  });
</script>
